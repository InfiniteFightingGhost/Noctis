{
  "version": "2.0.0",
  "classification": {
    "global": {
      "confusion_matrix": [
        [
          444,
          246,
          16,
          0
        ],
        [
          760,
          2365,
          59,
          37
        ],
        [
          246,
          893,
          88,
          4
        ],
        [
          91,
          384,
          3,
          132
        ]
      ],
      "class_order": [
        "Deep",
        "Light",
        "REM",
        "W"
      ],
      "per_class": {
        "Deep": {
          "precision": 0.2881245944192083,
          "recall": 0.6288951841359773,
          "f1": 0.3951935914552736,
          "specificity": 0.7832872382457526,
          "support": 706
        },
        "Light": {
          "precision": 0.6082818930041153,
          "recall": 0.7342440235951568,
          "f1": 0.665353776902518,
          "specificity": 0.4020416175893208,
          "support": 3221
        },
        "REM": {
          "precision": 0.5301204819277109,
          "recall": 0.07148659626320066,
          "f1": 0.12598425196850394,
          "specificity": 0.9828080229226361,
          "support": 1231
        },
        "W": {
          "precision": 0.7630057803468208,
          "recall": 0.21639344262295082,
          "f1": 0.3371647509578544,
          "specificity": 0.9920511826289259,
          "support": 610
        }
      },
      "macro_f1": 0.38092409282103745,
      "weighted_f1": 0.48246676546947864,
      "balanced_accuracy": 0.41275481165432143,
      "mcc": 0.197714377965774,
      "kappa": 0.18348478666895043,
      "support_total": 5768
    }
  },
  "calibration": {
    "brier": 0.6361549922518263,
    "ece": 0.09418696598126244,
    "class_order": [
      "Deep",
      "Light",
      "REM",
      "W"
    ],
    "reliability": {
      "n": 5768,
      "bins": [
        {
          "bin": 0,
          "bin_lower": 0.0,
          "bin_upper": 0.06666666666666667,
          "count": 0,
          "avg_conf": 0.0,
          "avg_acc": 0.0,
          "gap": 0.0
        },
        {
          "bin": 1,
          "bin_lower": 0.06666666666666667,
          "bin_upper": 0.13333333333333333,
          "count": 0,
          "avg_conf": 0.0,
          "avg_acc": 0.0,
          "gap": 0.0
        },
        {
          "bin": 2,
          "bin_lower": 0.13333333333333333,
          "bin_upper": 0.2,
          "count": 0,
          "avg_conf": 0.0,
          "avg_acc": 0.0,
          "gap": 0.0
        },
        {
          "bin": 3,
          "bin_lower": 0.2,
          "bin_upper": 0.26666666666666666,
          "count": 0,
          "avg_conf": 0.0,
          "avg_acc": 0.0,
          "gap": 0.0
        },
        {
          "bin": 4,
          "bin_lower": 0.26666666666666666,
          "bin_upper": 0.3333333333333333,
          "count": 5,
          "avg_conf": 0.3271966416596702,
          "avg_acc": 0.2,
          "gap": 0.1271966416596702
        },
        {
          "bin": 5,
          "bin_lower": 0.3333333333333333,
          "bin_upper": 0.4,
          "count": 318,
          "avg_conf": 0.38097040110137864,
          "avg_acc": 0.5880503144654088,
          "gap": 0.20707991336403014
        },
        {
          "bin": 6,
          "bin_lower": 0.4,
          "bin_upper": 0.4666666666666667,
          "count": 938,
          "avg_conf": 0.4349234491938001,
          "avg_acc": 0.47974413646055436,
          "gap": 0.044820687266754256
        },
        {
          "bin": 7,
          "bin_lower": 0.4666666666666667,
          "bin_upper": 0.5333333333333333,
          "count": 1137,
          "avg_conf": 0.5000494201515048,
          "avg_acc": 0.5048372911169745,
          "gap": 0.0047878709654697316
        },
        {
          "bin": 8,
          "bin_lower": 0.5333333333333333,
          "bin_upper": 0.6,
          "count": 1283,
          "avg_conf": 0.5678301120246052,
          "avg_acc": 0.5853468433359315,
          "gap": 0.01751673131132625
        },
        {
          "bin": 9,
          "bin_lower": 0.6,
          "bin_upper": 0.6666666666666666,
          "count": 949,
          "avg_conf": 0.630327704268146,
          "avg_acc": 0.5184404636459431,
          "gap": 0.1118872406222029
        },
        {
          "bin": 10,
          "bin_lower": 0.6666666666666666,
          "bin_upper": 0.7333333333333333,
          "count": 434,
          "avg_conf": 0.698151552320594,
          "avg_acc": 0.5230414746543779,
          "gap": 0.1751100776662161
        },
        {
          "bin": 11,
          "bin_lower": 0.7333333333333333,
          "bin_upper": 0.8,
          "count": 372,
          "avg_conf": 0.7649862558587335,
          "avg_acc": 0.4381720430107527,
          "gap": 0.3268142128479808
        },
        {
          "bin": 12,
          "bin_lower": 0.8,
          "bin_upper": 0.8666666666666667,
          "count": 195,
          "avg_conf": 0.8296319245013999,
          "avg_acc": 0.48205128205128206,
          "gap": 0.3475806424501178
        },
        {
          "bin": 13,
          "bin_lower": 0.8666666666666667,
          "bin_upper": 0.9333333333333333,
          "count": 96,
          "avg_conf": 0.9006429131042332,
          "avg_acc": 0.65625,
          "gap": 0.24439291310423317
        },
        {
          "bin": 14,
          "bin_lower": 0.9333333333333333,
          "bin_upper": 1.0,
          "count": 41,
          "avg_conf": 0.9470694325033934,
          "avg_acc": 0.6585365853658537,
          "gap": 0.2885328471375397
        }
      ]
    },
    "per_class": {
      "Deep": {
        "ece": 0.1405958948302127,
        "reliability": {
          "n": 5768,
          "bins": [
            {
              "bin": 0,
              "bin_lower": 0.0,
              "bin_upper": 0.06666666666666667,
              "count": 637,
              "avg_conf": 0.04918423458261903,
              "avg_acc": 0.03139717425431711,
              "gap": 0.01778706032830192
            },
            {
              "bin": 1,
              "bin_lower": 0.06666666666666667,
              "bin_upper": 0.13333333333333333,
              "count": 2419,
              "avg_conf": 0.09652503154012619,
              "avg_acc": 0.02687060768912774,
              "gap": 0.06965442385099846
            },
            {
              "bin": 2,
              "bin_lower": 0.13333333333333333,
              "bin_upper": 0.2,
              "count": 463,
              "avg_conf": 0.1497219687374238,
              "avg_acc": 0.04535637149028078,
              "gap": 0.10436559724714302
            },
            {
              "bin": 3,
              "bin_lower": 0.2,
              "bin_upper": 0.26666666666666666,
              "count": 299,
              "avg_conf": 0.23719477325880617,
              "avg_acc": 0.23411371237458195,
              "gap": 0.003081060884224218
            },
            {
              "bin": 4,
              "bin_lower": 0.26666666666666666,
              "bin_upper": 0.3333333333333333,
              "count": 237,
              "avg_conf": 0.29532156113094415,
              "avg_acc": 0.24050632911392406,
              "gap": 0.0548152320170201
            },
            {
              "bin": 5,
              "bin_lower": 0.3333333333333333,
              "bin_upper": 0.4,
              "count": 196,
              "avg_conf": 0.36659731158460807,
              "avg_acc": 0.17346938775510204,
              "gap": 0.19312792382950603
            },
            {
              "bin": 6,
              "bin_lower": 0.4,
              "bin_upper": 0.4666666666666667,
              "count": 188,
              "avg_conf": 0.4373470519702895,
              "avg_acc": 0.15425531914893617,
              "gap": 0.28309173282135336
            },
            {
              "bin": 7,
              "bin_lower": 0.4666666666666667,
              "bin_upper": 0.5333333333333333,
              "count": 213,
              "avg_conf": 0.49973137293450365,
              "avg_acc": 0.1643192488262911,
              "gap": 0.33541212410821253
            },
            {
              "bin": 8,
              "bin_lower": 0.5333333333333333,
              "bin_upper": 0.6,
              "count": 255,
              "avg_conf": 0.5659067475839626,
              "avg_acc": 0.3843137254901961,
              "gap": 0.18159302209376654
            },
            {
              "bin": 9,
              "bin_lower": 0.6,
              "bin_upper": 0.6666666666666666,
              "count": 259,
              "avg_conf": 0.6329864326229466,
              "avg_acc": 0.24324324324324326,
              "gap": 0.38974318937970337
            },
            {
              "bin": 10,
              "bin_lower": 0.6666666666666666,
              "bin_upper": 0.7333333333333333,
              "count": 182,
              "avg_conf": 0.7022384138680681,
              "avg_acc": 0.2857142857142857,
              "gap": 0.41652412815378237
            },
            {
              "bin": 11,
              "bin_lower": 0.7333333333333333,
              "bin_upper": 0.8,
              "count": 196,
              "avg_conf": 0.7678769650989603,
              "avg_acc": 0.3520408163265306,
              "gap": 0.4158361487724297
            },
            {
              "bin": 12,
              "bin_lower": 0.8,
              "bin_upper": 0.8666666666666667,
              "count": 124,
              "avg_conf": 0.830450748740171,
              "avg_acc": 0.31451612903225806,
              "gap": 0.5159346197079129
            },
            {
              "bin": 13,
              "bin_lower": 0.8666666666666667,
              "bin_upper": 0.9333333333333333,
              "count": 59,
              "avg_conf": 0.8985622020173556,
              "avg_acc": 0.4576271186440678,
              "gap": 0.4409350833732878
            },
            {
              "bin": 14,
              "bin_lower": 0.9333333333333333,
              "bin_upper": 1.0,
              "count": 41,
              "avg_conf": 0.9470694325033934,
              "avg_acc": 0.6585365853658537,
              "gap": 0.2885328471375397
            }
          ]
        }
      },
      "Light": {
        "ece": 0.14561009177277395,
        "reliability": {
          "n": 5768,
          "bins": [
            {
              "bin": 0,
              "bin_lower": 0.0,
              "bin_upper": 0.06666666666666667,
              "count": 280,
              "avg_conf": 0.032581621072521785,
              "avg_acc": 0.43214285714285716,
              "gap": 0.3995612360703354
            },
            {
              "bin": 1,
              "bin_lower": 0.06666666666666667,
              "bin_upper": 0.13333333333333333,
              "count": 322,
              "avg_conf": 0.09844130743925839,
              "avg_acc": 0.37888198757763975,
              "gap": 0.28044068013838136
            },
            {
              "bin": 2,
              "bin_lower": 0.13333333333333333,
              "bin_upper": 0.2,
              "count": 279,
              "avg_conf": 0.16477945904302604,
              "avg_acc": 0.2078853046594982,
              "gap": 0.043105845616472155
            },
            {
              "bin": 3,
              "bin_lower": 0.2,
              "bin_upper": 0.26666666666666666,
              "count": 258,
              "avg_conf": 0.2364595288215228,
              "avg_acc": 0.49612403100775193,
              "gap": 0.25966450218622916
            },
            {
              "bin": 4,
              "bin_lower": 0.26666666666666666,
              "bin_upper": 0.3333333333333333,
              "count": 389,
              "avg_conf": 0.30000092350295976,
              "avg_acc": 0.5784061696658098,
              "gap": 0.27840524616285006
            },
            {
              "bin": 5,
              "bin_lower": 0.3333333333333333,
              "bin_upper": 0.4,
              "count": 530,
              "avg_conf": 0.3695131277213061,
              "avg_acc": 0.6547169811320754,
              "gap": 0.2852038534107693
            },
            {
              "bin": 6,
              "bin_lower": 0.4,
              "bin_upper": 0.4666666666666667,
              "count": 732,
              "avg_conf": 0.4346577929623708,
              "avg_acc": 0.5505464480874317,
              "gap": 0.11588865512506091
            },
            {
              "bin": 7,
              "bin_lower": 0.4666666666666667,
              "bin_upper": 0.5333333333333333,
              "count": 896,
              "avg_conf": 0.499981781670456,
              "avg_acc": 0.5870535714285714,
              "gap": 0.08707178975811541
            },
            {
              "bin": 8,
              "bin_lower": 0.5333333333333333,
              "bin_upper": 0.6,
              "count": 999,
              "avg_conf": 0.5685863715540014,
              "avg_acc": 0.6366366366366366,
              "gap": 0.06805026508263523
            },
            {
              "bin": 9,
              "bin_lower": 0.6,
              "bin_upper": 0.6666666666666666,
              "count": 681,
              "avg_conf": 0.6292639183475992,
              "avg_acc": 0.6240822320117474,
              "gap": 0.0051816863358518095
            },
            {
              "bin": 10,
              "bin_lower": 0.6666666666666666,
              "bin_upper": 0.7333333333333333,
              "count": 224,
              "avg_conf": 0.693408110726047,
              "avg_acc": 0.6651785714285714,
              "gap": 0.028229539297475625
            },
            {
              "bin": 11,
              "bin_lower": 0.7333333333333333,
              "bin_upper": 0.8,
              "count": 133,
              "avg_conf": 0.7619747993796894,
              "avg_acc": 0.39097744360902253,
              "gap": 0.37099735577066684
            },
            {
              "bin": 12,
              "bin_lower": 0.8,
              "bin_upper": 0.8666666666666667,
              "count": 40,
              "avg_conf": 0.8184323368616772,
              "avg_acc": 0.6,
              "gap": 0.21843233686167718
            },
            {
              "bin": 13,
              "bin_lower": 0.8666666666666667,
              "bin_upper": 0.9333333333333333,
              "count": 5,
              "avg_conf": 0.9077624593351903,
              "avg_acc": 1.0,
              "gap": 0.09223754066480971
            },
            {
              "bin": 14,
              "bin_lower": 0.9333333333333333,
              "bin_upper": 1.0,
              "count": 0,
              "avg_conf": 0.0,
              "avg_acc": 0.0,
              "gap": 0.0
            }
          ]
        }
      },
      "REM": {
        "ece": 0.04624513778853302,
        "reliability": {
          "n": 5768,
          "bins": [
            {
              "bin": 0,
              "bin_lower": 0.0,
              "bin_upper": 0.06666666666666667,
              "count": 738,
              "avg_conf": 0.03426359424378068,
              "avg_acc": 0.08265582655826559,
              "gap": 0.04839223231448491
            },
            {
              "bin": 1,
              "bin_lower": 0.06666666666666667,
              "bin_upper": 0.13333333333333333,
              "count": 1021,
              "avg_conf": 0.10336746450771542,
              "avg_acc": 0.1802154750244858,
              "gap": 0.07684801051677037
            },
            {
              "bin": 2,
              "bin_lower": 0.13333333333333333,
              "bin_upper": 0.2,
              "count": 1329,
              "avg_conf": 0.1655226790799955,
              "avg_acc": 0.1835966892400301,
              "gap": 0.018074010160034598
            },
            {
              "bin": 3,
              "bin_lower": 0.2,
              "bin_upper": 0.26666666666666666,
              "count": 1383,
              "avg_conf": 0.23163708762696478,
              "avg_acc": 0.18872017353579176,
              "gap": 0.042916914091173014
            },
            {
              "bin": 4,
              "bin_lower": 0.26666666666666666,
              "bin_upper": 0.3333333333333333,
              "count": 804,
              "avg_conf": 0.29351110086805277,
              "avg_acc": 0.33955223880597013,
              "gap": 0.046041137937917365
            },
            {
              "bin": 5,
              "bin_lower": 0.3333333333333333,
              "bin_upper": 0.4,
              "count": 336,
              "avg_conf": 0.36111147282126027,
              "avg_acc": 0.33630952380952384,
              "gap": 0.024801949011736435
            },
            {
              "bin": 6,
              "bin_lower": 0.4,
              "bin_upper": 0.4666666666666667,
              "count": 101,
              "avg_conf": 0.4212907628887687,
              "avg_acc": 0.5544554455445545,
              "gap": 0.1331646826557858
            },
            {
              "bin": 7,
              "bin_lower": 0.4666666666666667,
              "bin_upper": 0.5333333333333333,
              "count": 29,
              "avg_conf": 0.49683289738574204,
              "avg_acc": 0.41379310344827586,
              "gap": 0.08303979393746619
            },
            {
              "bin": 8,
              "bin_lower": 0.5333333333333333,
              "bin_upper": 0.6,
              "count": 6,
              "avg_conf": 0.5430975420909104,
              "avg_acc": 1.0,
              "gap": 0.45690245790908957
            },
            {
              "bin": 9,
              "bin_lower": 0.6,
              "bin_upper": 0.6666666666666666,
              "count": 0,
              "avg_conf": 0.0,
              "avg_acc": 0.0,
              "gap": 0.0
            },
            {
              "bin": 10,
              "bin_lower": 0.6666666666666666,
              "bin_upper": 0.7333333333333333,
              "count": 4,
              "avg_conf": 0.7241685203436665,
              "avg_acc": 1.0,
              "gap": 0.2758314796563335
            },
            {
              "bin": 11,
              "bin_lower": 0.7333333333333333,
              "bin_upper": 0.8,
              "count": 17,
              "avg_conf": 0.7565200306330573,
              "avg_acc": 1.0,
              "gap": 0.24347996936694272
            },
            {
              "bin": 12,
              "bin_lower": 0.8,
              "bin_upper": 0.8666666666666667,
              "count": 0,
              "avg_conf": 0.0,
              "avg_acc": 0.0,
              "gap": 0.0
            },
            {
              "bin": 13,
              "bin_lower": 0.8666666666666667,
              "bin_upper": 0.9333333333333333,
              "count": 0,
              "avg_conf": 0.0,
              "avg_acc": 0.0,
              "gap": 0.0
            },
            {
              "bin": 14,
              "bin_lower": 0.9333333333333333,
              "bin_upper": 1.0,
              "count": 0,
              "avg_conf": 0.0,
              "avg_acc": 0.0,
              "gap": 0.0
            }
          ]
        }
      },
      "W": {
        "ece": 0.01940619754226771,
        "reliability": {
          "n": 5768,
          "bins": [
            {
              "bin": 0,
              "bin_lower": 0.0,
              "bin_upper": 0.06666666666666667,
              "count": 2188,
              "avg_conf": 0.0407848987045877,
              "avg_acc": 0.047074954296160876,
              "gap": 0.006290055591573175
            },
            {
              "bin": 1,
              "bin_lower": 0.06666666666666667,
              "bin_upper": 0.13333333333333333,
              "count": 2528,
              "avg_conf": 0.09683098106591646,
              "avg_acc": 0.10284810126582279,
              "gap": 0.006017120199906328
            },
            {
              "bin": 2,
              "bin_lower": 0.13333333333333333,
              "bin_upper": 0.2,
              "count": 565,
              "avg_conf": 0.16453895223785964,
              "avg_acc": 0.13274336283185842,
              "gap": 0.03179558940600122
            },
            {
              "bin": 3,
              "bin_lower": 0.2,
              "bin_upper": 0.26666666666666666,
              "count": 211,
              "avg_conf": 0.22483965513979862,
              "avg_acc": 0.0947867298578199,
              "gap": 0.1300529252819787
            },
            {
              "bin": 4,
              "bin_lower": 0.26666666666666666,
              "bin_upper": 0.3333333333333333,
              "count": 74,
              "avg_conf": 0.28985857031594126,
              "avg_acc": 0.21621621621621623,
              "gap": 0.07364235409972503
            },
            {
              "bin": 5,
              "bin_lower": 0.3333333333333333,
              "bin_upper": 0.4,
              "count": 28,
              "avg_conf": 0.36275323753770605,
              "avg_acc": 0.14285714285714285,
              "gap": 0.2198960946805632
            },
            {
              "bin": 6,
              "bin_lower": 0.4,
              "bin_upper": 0.4666666666666667,
              "count": 17,
              "avg_conf": 0.4254484856905329,
              "avg_acc": 0.17647058823529413,
              "gap": 0.24897789745523877
            },
            {
              "bin": 7,
              "bin_lower": 0.4666666666666667,
              "bin_upper": 0.5333333333333333,
              "count": 12,
              "avg_conf": 0.4895385901415192,
              "avg_acc": 0.4166666666666667,
              "gap": 0.0728719234748525
            },
            {
              "bin": 8,
              "bin_lower": 0.5333333333333333,
              "bin_upper": 0.6,
              "count": 23,
              "avg_conf": 0.562758376463696,
              "avg_acc": 0.4782608695652174,
              "gap": 0.08449750689847857
            },
            {
              "bin": 9,
              "bin_lower": 0.6,
              "bin_upper": 0.6666666666666666,
              "count": 9,
              "avg_conf": 0.6343085451569199,
              "avg_acc": 0.4444444444444444,
              "gap": 0.1898641007124755
            },
            {
              "bin": 10,
              "bin_lower": 0.6666666666666666,
              "bin_upper": 0.7333333333333333,
              "count": 24,
              "avg_conf": 0.7070954791308424,
              "avg_acc": 0.9166666666666666,
              "gap": 0.20957118753582427
            },
            {
              "bin": 11,
              "bin_lower": 0.7333333333333333,
              "bin_upper": 0.8,
              "count": 26,
              "avg_conf": 0.7641351223766152,
              "avg_acc": 0.9615384615384616,
              "gap": 0.19740333916184638
            },
            {
              "bin": 12,
              "bin_lower": 0.8,
              "bin_upper": 0.8666666666666667,
              "count": 31,
              "avg_conf": 0.8408077083717642,
              "avg_acc": 1.0,
              "gap": 0.15919229162823578
            },
            {
              "bin": 13,
              "bin_lower": 0.8666666666666667,
              "bin_upper": 0.9333333333333333,
              "count": 32,
              "avg_conf": 0.9033667950720767,
              "avg_acc": 0.96875,
              "gap": 0.06538320492792327
            },
            {
              "bin": 14,
              "bin_lower": 0.9333333333333333,
              "bin_upper": 1.0,
              "count": 0,
              "avg_conf": 0.0,
              "avg_acc": 0.0,
              "gap": 0.0
            }
          ]
        }
      }
    }
  },
  "night": {
    "class_order": [
      "Deep",
      "Light",
      "REM",
      "W"
    ],
    "nights": [
      {
        "recording_id": "125f4d80-3bea-4b98-b36e-d33e5a33760c",
        "dataset_id": "DODH",
        "samples": 940,
        "macro_f1": 0.29532652340638677,
        "mcc": 0.27768238297804954,
        "kappa": 0.19456716049890072,
        "brier": 0.5456239891813461,
        "ece": 0.08837242284002308,
        "transition_matrix_error_raw": 774.0,
        "transition_matrix_error_norm": 2.2538192831698964,
        "transition_entropy_diff": 0.24378402691172857,
        "hypnogram_edit_distance_raw": 406,
        "hypnogram_edit_distance_norm": 0.4319148936170213,
        "fragmentation_error": 0.06580228931283422,
        "impossible_transition_rate": 0.0,
        "wake_deep_direct_rate": 0.0,
        "clinical_true": {
          "tst_min": 339.5,
          "se": 0.7223404255319149,
          "rem_pct": 0.030927835051546393,
          "n3_pct": 0.31075110456553756,
          "rem_latency_min": 4.5,
          "waso_min": 130.5
        },
        "clinical_pred": {
          "tst_min": 407.5,
          "se": 0.8670212765957447,
          "rem_pct": 0.0,
          "n3_pct": 0.0,
          "rem_latency_min": 0.0,
          "waso_min": 62.5
        },
        "clinical_error": {
          "n3_pct": {
            "mae": 0.31075110456553756,
            "ape": 1.0
          },
          "rem_latency_min": {
            "mae": 4.5,
            "ape": 1.0
          },
          "rem_pct": {
            "mae": 0.030927835051546393,
            "ape": 1.0
          },
          "se": {
            "mae": 0.14468085106382977,
            "ape": 0.2002945508100147
          },
          "tst_min": {
            "mae": 68.0,
            "ape": 0.20029455081001474
          },
          "waso_min": {
            "mae": 68.0,
            "ape": 0.5210727969348659
          }
        }
      },
      {
        "recording_id": "22368fa5-e533-4965-b6a3-99f464b91724",
        "dataset_id": "DODH",
        "samples": 935,
        "macro_f1": 0.2594408393474437,
        "mcc": -0.033571033858519096,
        "kappa": -0.011595818154332162,
        "brier": 0.5843549860164476,
        "ece": 0.17868143653439453,
        "transition_matrix_error_raw": 718.0,
        "transition_matrix_error_norm": 2.8441719296960226,
        "transition_entropy_diff": 0.08122935931848052,
        "hypnogram_edit_distance_raw": 364,
        "hypnogram_edit_distance_norm": 0.3893048128342246,
        "fragmentation_error": 0.08128342228602478,
        "impossible_transition_rate": 0.0,
        "wake_deep_direct_rate": 0.0,
        "clinical_true": {
          "tst_min": 467.5,
          "se": 1.0,
          "rem_pct": 0.10053475935828877,
          "n3_pct": 0.279144385026738,
          "rem_latency_min": 0.0,
          "waso_min": 0.0
        },
        "clinical_pred": {
          "tst_min": 467.5,
          "se": 1.0,
          "rem_pct": 0.0021390374331550803,
          "n3_pct": 0.014973262032085561,
          "rem_latency_min": 99.5,
          "waso_min": 0.0
        },
        "clinical_error": {
          "n3_pct": {
            "mae": 0.26417112299465245,
            "ape": 0.9463601532567051
          },
          "rem_latency_min": {
            "mae": 99.5,
            "ape": 0.0
          },
          "rem_pct": {
            "mae": 0.0983957219251337,
            "ape": 0.9787234042553192
          },
          "se": {
            "mae": 0.0,
            "ape": 0.0
          },
          "tst_min": {
            "mae": 0.0,
            "ape": 0.0
          },
          "waso_min": {
            "mae": 0.0,
            "ape": 0.0
          }
        }
      },
      {
        "recording_id": "2a3fa418-cfb1-470d-accc-d7b5cf31bccd",
        "dataset_id": "DODH",
        "samples": 990,
        "macro_f1": 0.19577001716236825,
        "mcc": -0.03445774103836845,
        "kappa": -0.0303798661110089,
        "brier": 0.6196360836915121,
        "ece": 0.09306173718598022,
        "transition_matrix_error_raw": 610.0,
        "transition_matrix_error_norm": 2.7798493967323648,
        "transition_entropy_diff": 0.25450326118073446,
        "hypnogram_edit_distance_raw": 432,
        "hypnogram_edit_distance_norm": 0.43636363636363634,
        "fragmentation_error": 0.012297562834016201,
        "impossible_transition_rate": 0.0,
        "wake_deep_direct_rate": 0.0,
        "clinical_true": {
          "tst_min": 479.0,
          "se": 0.9676767676767677,
          "rem_pct": 0.1534446764091858,
          "n3_pct": 0.06784968684759916,
          "rem_latency_min": 0.0,
          "waso_min": 16.0
        },
        "clinical_pred": {
          "tst_min": 338.0,
          "se": 0.6828282828282828,
          "rem_pct": 0.0029585798816568047,
          "n3_pct": 0.0,
          "rem_latency_min": 0.0,
          "waso_min": 157.0
        },
        "clinical_error": {
          "n3_pct": {
            "mae": 0.06784968684759916,
            "ape": 1.0
          },
          "rem_latency_min": {
            "mae": 0.0,
            "ape": 0.0
          },
          "rem_pct": {
            "mae": 0.150486096527529,
            "ape": 0.980718914784849
          },
          "se": {
            "mae": 0.2848484848484849,
            "ape": 0.2943632567849687
          },
          "tst_min": {
            "mae": 141.0,
            "ape": 0.29436325678496866
          },
          "waso_min": {
            "mae": 141.0,
            "ape": 8.8125
          }
        }
      },
      {
        "recording_id": "505be011-5eec-4d02-be94-c6c0585eec6f",
        "dataset_id": "DODH",
        "samples": 945,
        "macro_f1": 0.6982420255276971,
        "mcc": 0.5861222952010066,
        "kappa": 0.5757864632983795,
        "brier": 0.4089015156179355,
        "ece": 0.13708798888141466,
        "transition_matrix_error_raw": 344.0,
        "transition_matrix_error_norm": 1.0330231297752883,
        "transition_entropy_diff": 0.22110087724334754,
        "hypnogram_edit_distance_raw": 253,
        "hypnogram_edit_distance_norm": 0.2677248677248677,
        "fragmentation_error": 0.09888357232987346,
        "impossible_transition_rate": 0.00211864406779661,
        "wake_deep_direct_rate": 0.0031779661016949155,
        "clinical_true": {
          "tst_min": 390.5,
          "se": 0.8264550264550264,
          "rem_pct": 0.20998719590268886,
          "n3_pct": 0.24199743918053776,
          "rem_latency_min": 0.0,
          "waso_min": 82.0
        },
        "clinical_pred": {
          "tst_min": 399.0,
          "se": 0.8444444444444444,
          "rem_pct": 0.20426065162907267,
          "n3_pct": 0.12781954887218044,
          "rem_latency_min": 0.0,
          "waso_min": 73.5
        },
        "clinical_error": {
          "n3_pct": {
            "mae": 0.11417789030835732,
            "ape": 0.4718144567768628
          },
          "rem_latency_min": {
            "mae": 0.0,
            "ape": 0.0
          },
          "rem_pct": {
            "mae": 0.005726544273616185,
            "ape": 0.02727092120545269
          },
          "se": {
            "mae": 0.017989417989418,
            "ape": 0.021766965428937274
          },
          "tst_min": {
            "mae": 8.5,
            "ape": 0.02176696542893726
          },
          "waso_min": {
            "mae": 8.5,
            "ape": 0.10365853658536585
          }
        }
      },
      {
        "recording_id": "6349be90-e35c-469c-9e92-363c371c4679",
        "dataset_id": "DODH",
        "samples": 988,
        "macro_f1": 0.18188337109692698,
        "mcc": -0.08066184313135974,
        "kappa": -0.03910399472075448,
        "brier": 0.6499010603291773,
        "ece": 0.16262010791148132,
        "transition_matrix_error_raw": 836.0,
        "transition_matrix_error_norm": 2.3266928442014163,
        "transition_entropy_diff": 0.17953694354711286,
        "hypnogram_edit_distance_raw": 450,
        "hypnogram_edit_distance_norm": 0.45546558704453444,
        "fragmentation_error": 0.07764906638906897,
        "impossible_transition_rate": 0.0,
        "wake_deep_direct_rate": 0.0,
        "clinical_true": {
          "tst_min": 475.5,
          "se": 0.9625506072874493,
          "rem_pct": 0.1167192429022082,
          "n3_pct": 0.29232386961093587,
          "rem_latency_min": 0.0,
          "waso_min": 18.5
        },
        "clinical_pred": {
          "tst_min": 488.0,
          "se": 0.9878542510121457,
          "rem_pct": 0.006147540983606557,
          "n3_pct": 0.0235655737704918,
          "rem_latency_min": 0.0,
          "waso_min": 6.0
        },
        "clinical_error": {
          "n3_pct": {
            "mae": 0.2687582958404441,
            "ape": 0.9193853933246846
          },
          "rem_latency_min": {
            "mae": 0.0,
            "ape": 0.0
          },
          "rem_pct": {
            "mae": 0.11057170191860163,
            "ape": 0.9473305272485599
          },
          "se": {
            "mae": 0.0253036437246964,
            "ape": 0.02628811777076766
          },
          "tst_min": {
            "mae": 12.5,
            "ape": 0.026288117770767613
          },
          "waso_min": {
            "mae": 12.5,
            "ape": 0.6756756756756757
          }
        }
      },
      {
        "recording_id": "fa19f64c-51b9-44bc-b13c-6eb41de0aba3",
        "dataset_id": "DODH",
        "samples": 970,
        "macro_f1": 0.11736544295599413,
        "mcc": 0.06817803183067468,
        "kappa": 0.016608718726823676,
        "brier": 0.9980717843648623,
        "ece": 0.4471969764319531,
        "transition_matrix_error_raw": 1494.0,
        "transition_matrix_error_norm": 2.8714185883997203,
        "transition_entropy_diff": 0.09187885188411007,
        "hypnogram_edit_distance_raw": 745,
        "hypnogram_edit_distance_norm": 0.7680412371134021,
        "fragmentation_error": 1.4792337309490393,
        "impossible_transition_rate": 0.0,
        "wake_deep_direct_rate": 0.011351909184726523,
        "clinical_true": {
          "tst_min": 379.0,
          "se": 0.7814432989690722,
          "rem_pct": 0.09630606860158311,
          "n3_pct": 0.2994722955145119,
          "rem_latency_min": 0.0,
          "waso_min": 106.0
        },
        "clinical_pred": {
          "tst_min": 13.5,
          "se": 0.027835051546391754,
          "rem_pct": 0.0,
          "n3_pct": 1.0,
          "rem_latency_min": 0.0,
          "waso_min": 209.5
        },
        "clinical_error": {
          "n3_pct": {
            "mae": 0.7005277044854881,
            "ape": 2.3392070484581495
          },
          "rem_latency_min": {
            "mae": 0.0,
            "ape": 0.0
          },
          "rem_pct": {
            "mae": 0.09630606860158311,
            "ape": 1.0
          },
          "se": {
            "mae": 0.7536082474226804,
            "ape": 0.9643799472295514
          },
          "tst_min": {
            "mae": 365.5,
            "ape": 0.9643799472295514
          },
          "waso_min": {
            "mae": 103.5,
            "ape": 0.9764150943396226
          }
        }
      }
    ]
  },
  "night_summary": {
    "macro_f1": {
      "mean": 0.29133803658280283,
      "std": 0.19060615104786457,
      "p10": 0.14962440702646057,
      "worst_decile_mean": 0.11736544295599413,
      "worst_decile_ids": [
        "fa19f64c-51b9-44bc-b13c-6eb41de0aba3"
      ]
    },
    "mcc": {
      "mean": 0.1305486819969139,
      "std": 0.23518008267238022,
      "p10": -0.05755979208486409,
      "worst_decile_mean": -0.08066184313135974,
      "worst_decile_ids": [
        "6349be90-e35c-469c-9e92-363c371c4679"
      ]
    },
    "kappa": {
      "mean": 0.11764711058966805,
      "std": 0.21954640613703755,
      "p10": -0.03474193041588169,
      "worst_decile_mean": -0.03910399472075448,
      "worst_decile_ids": [
        "6349be90-e35c-469c-9e92-363c371c4679"
      ]
    }
  },
  "temporal_stability": {
    "transition_matrix_error_raw": {
      "mean": 796.0,
      "std": 349.82662372476267,
      "p10": 477.0,
      "worst_decile_mean": 344.0,
      "worst_decile_ids": [
        "505be011-5eec-4d02-be94-c6c0585eec6f"
      ]
    },
    "transition_matrix_error_norm": {
      "mean": 2.3514958619957844,
      "std": 0.638365405963937,
      "p10": 1.6434212064725924,
      "worst_decile_mean": 1.0330231297752883,
      "worst_decile_ids": [
        "505be011-5eec-4d02-be94-c6c0585eec6f"
      ]
    },
    "transition_entropy_diff": {
      "mean": 0.17867222001425231,
      "std": 0.0693049213678813,
      "p10": 0.0865541056012953,
      "worst_decile_mean": 0.08122935931848052,
      "worst_decile_ids": [
        "22368fa5-e533-4965-b6a3-99f464b91724"
      ]
    },
    "hypnogram_edit_distance_raw": {
      "mean": 441.6666666666667,
      "std": 150.04073520954975,
      "p10": 308.5,
      "worst_decile_mean": 253.0,
      "worst_decile_ids": [
        "505be011-5eec-4d02-be94-c6c0585eec6f"
      ]
    },
    "hypnogram_edit_distance_norm": {
      "mean": 0.4581358391162811,
      "std": 0.1517696175978144,
      "p10": 0.32851484027954614,
      "worst_decile_mean": 0.2677248677248677,
      "worst_decile_ids": [
        "505be011-5eec-4d02-be94-c6c0585eec6f"
      ]
    },
    "fragmentation_error": {
      "mean": 0.3025249406834762,
      "std": 0.526925025789719,
      "p10": 0.03904992607342521,
      "worst_decile_mean": 0.012297562834016201,
      "worst_decile_ids": [
        "2a3fa418-cfb1-470d-accc-d7b5cf31bccd"
      ]
    },
    "impossible_transition_rate": {
      "mean": 0.00035310734463276836,
      "std": 0.0007895720259533156,
      "p10": 0.0,
      "worst_decile_mean": 0.0,
      "worst_decile_ids": [
        "125f4d80-3bea-4b98-b36e-d33e5a33760c"
      ]
    },
    "wake_deep_direct_rate": {
      "mean": 0.00242164588107024,
      "std": 0.0041589080706753954,
      "p10": 0.0,
      "worst_decile_mean": 0.0,
      "worst_decile_ids": [
        "125f4d80-3bea-4b98-b36e-d33e5a33760c"
      ]
    }
  },
  "clinical_agreement": {
    "tst_min": {
      "mae": 99.25,
      "ape": 0.25118213967070663
    },
    "se": {
      "mae": 0.20440510750818489,
      "ape": 0.25118213967070663
    },
    "rem_pct": {
      "mae": 0.082068994716335,
      "ape": 0.8223406279156968
    },
    "n3_pct": {
      "mae": 0.2877059675070131,
      "ape": 1.1127945086360669
    },
    "rem_latency_min": {
      "mae": 17.333333333333332,
      "ape": 0.16666666666666666
    },
    "waso_min": {
      "mae": 55.583333333333336,
      "ape": 1.848220350589255
    }
  },
  "domain": {
    "per_dataset": {
      "DODH": {
        "confusion_matrix": [
          [
            444,
            246,
            16,
            0
          ],
          [
            760,
            2365,
            59,
            37
          ],
          [
            246,
            893,
            88,
            4
          ],
          [
            91,
            384,
            3,
            132
          ]
        ],
        "class_order": [
          "Deep",
          "Light",
          "REM",
          "W"
        ],
        "per_class": {
          "Deep": {
            "precision": 0.2881245944192083,
            "recall": 0.6288951841359773,
            "f1": 0.3951935914552736,
            "specificity": 0.7832872382457526,
            "support": 706
          },
          "Light": {
            "precision": 0.6082818930041153,
            "recall": 0.7342440235951568,
            "f1": 0.665353776902518,
            "specificity": 0.4020416175893208,
            "support": 3221
          },
          "REM": {
            "precision": 0.5301204819277109,
            "recall": 0.07148659626320066,
            "f1": 0.12598425196850394,
            "specificity": 0.9828080229226361,
            "support": 1231
          },
          "W": {
            "precision": 0.7630057803468208,
            "recall": 0.21639344262295082,
            "f1": 0.3371647509578544,
            "specificity": 0.9920511826289259,
            "support": 610
          }
        },
        "macro_f1": 0.38092409282103745,
        "weighted_f1": 0.48246676546947864,
        "balanced_accuracy": 0.41275481165432143,
        "mcc": 0.197714377965774,
        "kappa": 0.18348478666895043,
        "support_total": 5768,
        "samples": 5768
      }
    },
    "domain_variance": {
      "macro_f1": 0.0,
      "mcc": 0.0,
      "kappa": 0.0
    }
  },
  "robustness": {
    "status": "FAIL",
    "hard_failures": [
      {
        "reason_code": "HARD_GLOBAL_MACRO_F1",
        "value": 0.38092409282103745,
        "threshold": 0.75,
        "operator": "gte"
      },
      {
        "reason_code": "HARD_GLOBAL_MCC",
        "value": 0.197714377965774,
        "threshold": 0.7,
        "operator": "gte"
      },
      {
        "reason_code": "HARD_WORST_DECILE_MACRO_F1",
        "value": 0.11736544295599413,
        "threshold": 0.5,
        "operator": "gte"
      },
      {
        "reason_code": "HARD_MIN_CLASS_RECALL",
        "value": 0.07148659626320066,
        "threshold": 0.15,
        "operator": "gte"
      },
      {
        "reason_code": "HARD_REM_RECALL",
        "value": 0.07148659626320066,
        "threshold": 0.65,
        "operator": "gte"
      },
      {
        "reason_code": "HARD_DEEP_RECALL",
        "value": 0.6288951841359773,
        "threshold": 0.7,
        "operator": "gte"
      },
      {
        "reason_code": "HARD_WORST_NIGHT_MACRO_F1",
        "value": 0.14962440702646057,
        "threshold": 0.6,
        "operator": "gte"
      }
    ],
    "soft_warnings": [
      {
        "reason_code": "SOFT_WORST_DECILE_MACRO_F1",
        "value": 0.11736544295599413,
        "threshold": 0.45,
        "operator": "gte"
      }
    ]
  },
  "thresholds": {
    "hard": {
      "macro_f1_min": 0.75,
      "mcc_min": 0.7,
      "worst_decile_macro_f1_min": 0.5,
      "domain_variance_macro_f1_max": 0.15,
      "rem_latency_mae_max": 20.0,
      "min_class_recall_floor": 0.15,
      "rem_recall_floor": 0.65,
      "deep_recall_floor": 0.7,
      "worst_night_macro_f1_floor": 0.6,
      "impossible_transition_rate_max": 0.08,
      "wake_deep_direct_rate_max": 0.05
    },
    "soft": {
      "worst_decile_macro_f1_warn": 0.45
    }
  }
}