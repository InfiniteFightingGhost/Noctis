{
  "version": "0.1.16",
  "created_at": "2026-02-24T23:19:06.745214+00:00",
  "random_seed": 42,
  "dataset_snapshot": {
    "created_at": "2026-02-24T22:46:37.278057+00:00",
    "window_size": 21,
    "epoch_seconds": 30,
    "allow_padding": false,
    "padding_policy": "reject",
    "feature_schema_version": "dreem_v1",
    "feature_schema_id": "bf820ff5-80c5-445e-ae6d-0bb9f6d5a4fa",
    "feature_schema_hash": "9213b47fdb2b2df7a282e0206e2f93553cf0ff0f057e9d361293b28b3be8c6ca",
    "feature_names": [
      "in_bed_pct",
      "hr_mean",
      "hr_std",
      "dhr",
      "rr_mean",
      "rr_std",
      "drr",
      "large_move_pct",
      "minor_move_pct",
      "turnovers_delta",
      "apnea_delta",
      "flags",
      "vib_move_pct",
      "vib_resp_q",
      "agree_flags"
    ],
    "feature_schema_path": null,
    "git_commit_hash": "121a3d70a38574a683a63875cd8dd3ee8474f433",
    "filters": {
      "from_ts": null,
      "to_ts": null,
      "device_id": "28302775-72d3-45ea-9fb1-d33b41ea6914",
      "recording_id": null,
      "feature_schema_version": null,
      "model_version": null,
      "tenant_id": null
    },
    "label_strategy": "ground_truth_only",
    "label_source_policy": "ground_truth_only",
    "allow_predicted_labels": false,
    "label_source_counts": {
      "ground_truth": 30418
    },
    "padded_window_count": 0,
    "balance_strategy": "none",
    "random_seed": 42,
    "split_sizes": {
      "train": 24650,
      "val": 0,
      "test": 5768
    },
    "label_map": [
      "W",
      "Light",
      "Deep",
      "REM"
    ],
    "split_policy": {
      "split_strategy": "recording",
      "seed": 42,
      "grouping_key": "recording_id",
      "time_aware": false,
      "purge_gap": 0,
      "block_seconds": null,
      "grouped_stratification": false,
      "stratify_key": "dataset_rem_bucket"
    },
    "window_alignment": {
      "end_ts": "epoch_start_plus_duration",
      "epoch_seconds": 30,
      "padding_policy": "reject",
      "alignment": "epoch_end"
    },
    "window_stride": 1,
    "dataset_snapshot_id": "8ffa9955-2a06-40c5-ae41-19fce8b7a15e",
    "dataset_snapshot_checksum": "3bb44f0b99f0fb62a8ecaa8cdf6892ea52ee5ca7a728f036463f7fd77e66f3f5",
    "dataset_snapshot_row_count": 30418,
    "recording_filter": {
      "from_ts": null,
      "to_ts": null,
      "device_id": "28302775-72d3-45ea-9fb1-d33b41ea6914",
      "recording_id": null,
      "feature_schema_version": "dreem_v1",
      "model_version": null,
      "tenant_id": null,
      "window_size": 21,
      "epoch_seconds": 30,
      "allow_padding": false,
      "window_alignment": "epoch_end",
      "padding_policy": "reject",
      "label_source_policy": "ground_truth_only",
      "label_strategy": "ground_truth_only",
      "allow_predicted_labels": false,
      "balance_strategy": "none",
      "random_seed": 42,
      "split_strategy": "recording",
      "split_time_aware": false,
      "split_purge_gap": 0,
      "split_block_seconds": null,
      "split": {
        "train": 0.8,
        "val": 0.0,
        "test": 0.2
      }
    }
  },
  "dataset_snapshot_id": "8ffa9955-2a06-40c5-ae41-19fce8b7a15e",
  "feature_schema_version": "dreem_v1",
  "feature_schema_hash": "9213b47fdb2b2df7a282e0206e2f93553cf0ff0f057e9d361293b28b3be8c6ca",
  "model_type": "cnn_bilstm",
  "label_map": [
    "W",
    "Light",
    "Deep",
    "REM"
  ],
  "label_map_source": "estimator_classes",
  "label_map_order_hash": "b7d15fba2f729255f06ec97eade7008e2ca5e97a7f324925fb010b4b12cb93e6",
  "model_classes": [
    "W",
    "Light",
    "Deep",
    "REM"
  ],
  "git_commit_hash": "121a3d70a38574a683a63875cd8dd3ee8474f433",
  "metrics_hash": "fc864c8c29692d108b1f96f4922106146fb6b92061e88b7ddcfb5d7a8ab8088c",
  "artifact_hash": "c7321f9e5e99610d033e31e8b8bc66000953ff826d5a0458b7c874fd43027088",
  "feature_strategy": "sequence",
  "window_size": 21,
  "epoch_seconds": 30,
  "window_stride": 1,
  "expected_input_dim": 26,
  "base_input_dim": 15,
  "dataset_id_map": {
    "DODH": 0,
    "CAP": 1,
    "ISRUC": 2,
    "SLEEP-EDF": 3,
    "UNKNOWN": 4
  },
  "inference_dataset_id": "UNKNOWN",
  "split_grouped_stratification": false,
  "split_stratify_key": "dataset_rem_bucket",
  "lineage": {
    "dataset_snapshot_id": "8ffa9955-2a06-40c5-ae41-19fce8b7a15e",
    "feature_schema_version": "dreem_v1",
    "feature_schema_hash": "9213b47fdb2b2df7a282e0206e2f93553cf0ff0f057e9d361293b28b3be8c6ca",
    "training_seed": 42,
    "git_commit_hash": "121a3d70a38574a683a63875cd8dd3ee8474f433",
    "metrics_hash": "fc864c8c29692d108b1f96f4922106146fb6b92061e88b7ddcfb5d7a8ab8088c",
    "artifact_hash": "c7321f9e5e99610d033e31e8b8bc66000953ff826d5a0458b7c874fd43027088"
  },
  "feature_pipeline": {
    "base_feature_schema": [
      "in_bed_pct",
      "hr_mean",
      "hr_std",
      "dhr",
      "rr_mean",
      "rr_std",
      "drr",
      "large_move_pct",
      "minor_move_pct",
      "turnovers_delta",
      "apnea_delta",
      "flags",
      "vib_move_pct",
      "vib_resp_q",
      "agree_flags"
    ],
    "engineered_features": [
      "hr_cv",
      "rr_cv",
      "instability",
      "move_total",
      "move_ratio",
      "stillness",
      "hr_rr_ratio",
      "var_ratio",
      "resp_instability",
      "vib_resp_instability",
      "low_agreement"
    ],
    "final_feature_schema": [
      "in_bed_pct",
      "hr_mean",
      "hr_std",
      "dhr",
      "rr_mean",
      "rr_std",
      "drr",
      "large_move_pct",
      "minor_move_pct",
      "turnovers_delta",
      "apnea_delta",
      "flags",
      "vib_move_pct",
      "vib_resp_q",
      "agree_flags",
      "hr_cv",
      "rr_cv",
      "instability",
      "move_total",
      "move_ratio",
      "stillness",
      "hr_rr_ratio",
      "var_ratio",
      "resp_instability",
      "vib_resp_instability",
      "low_agreement"
    ],
    "engineered_formulas": {
      "hr_cv": "hr_std / (abs(hr_mean) + 1e-6)",
      "rr_cv": "rr_std / (abs(rr_mean) + 1e-6)",
      "instability": "hr_std + rr_std + abs(dhr) + abs(drr)",
      "move_total": "large_move_pct + minor_move_pct + vib_move_pct",
      "move_ratio": "large_move_pct / (minor_move_pct + 1e-6)",
      "stillness": "1 - clip(move_total, 0, 1)",
      "hr_rr_ratio": "hr_mean / (rr_mean + 1e-6)",
      "var_ratio": "hr_std / (rr_std + 1e-6)",
      "resp_instability": "apnea_delta * rr_std",
      "vib_resp_instability": "vib_resp_q * rr_std",
      "low_agreement": "1 if agree_flags < train_quantile_0.15(agree_flags) else 0"
    },
    "eps": 1e-06,
    "low_agreement_threshold": 3.0,
    "requires_flags": true,
    "requires_agree_flags": true
  }
}