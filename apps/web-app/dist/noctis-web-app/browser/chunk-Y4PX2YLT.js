import{a as x,b as D,c as I,d as N,e as k}from"./chunk-TZ3X7ZKC.js";import{a as O}from"./chunk-JMSUOWMQ.js";import{c as E,e as M,f as y}from"./chunk-R6BJDFJL.js";import{Ea as f,Fa as u,Ga as m,Ka as p,La as t,Ma as r,Ta as c,Va as _,ba as l,c as v,db as n,eb as C,fb as S,lb as g,oa as s,ua as h,ya as P}from"./chunk-VHPO65OP.js";function T(a,b){a&1&&(t(0,"p",9),n(1,"Enter a valid email address."),r())}function A(a,b){a&1&&(t(0,"p",9),n(1,"Password must be at least 8 characters."),r())}function L(a,b){a&1&&(t(0,"p",9),n(1,"Passwords must match."),r())}function q(a,b){if(a&1&&(t(0,"p",10),n(1),r()),a&2){let o=_();s(),C(o.errorMessage())}}var H=(()=>{class a{auth;router;route;email=l("");password=l("");confirmPassword=l("");hasSubmitted=l(!1);isSubmitting=l(!1);errorMessage=l(null);showEmailError=g(()=>this.hasSubmitted()&&!D(this.email()));showPasswordError=g(()=>this.hasSubmitted()&&!I(this.password()));showConfirmPasswordError=g(()=>this.hasSubmitted()&&!N(this.password(),this.confirmPassword()));submitLabel=g(()=>this.isSubmitting()?"Creating account...":"Create account");constructor(o,i,e){this.auth=o,this.router=i,this.route=e}onEmailInput(o){let i=o.target;this.email.set(i.value),this.errorMessage.set(null)}onPasswordInput(o){let i=o.target;this.password.set(i.value),this.errorMessage.set(null)}onConfirmPasswordInput(o){let i=o.target;this.confirmPassword.set(i.value),this.errorMessage.set(null)}onSubmit(o){return v(this,null,function*(){if(o.preventDefault(),this.hasSubmitted.set(!0),this.errorMessage.set(null),!(this.showEmailError()||this.showPasswordError()||this.showConfirmPasswordError())){this.isSubmitting.set(!0);try{yield this.auth.signup(this.email().trim(),this.password());let i=k(this.route.snapshot.queryParamMap.get("redirect"));yield this.router.navigateByUrl(i)}catch(i){this.errorMessage.set(x(i))}finally{this.isSubmitting.set(!1)}}})}static \u0275fac=function(i){return new(i||a)(h(O),h(M),h(E))};static \u0275cmp=P({type:a,selectors:[["app-signup-page"]],decls:31,vars:12,consts:[[1,"auth-page"],[1,"auth-card"],[1,"eyebrow"],[1,"lede"],[1,"auth-form",3,"submit"],[1,"form-field"],["type","email","autocomplete","email","placeholder","you@example.com","required","",3,"input","value"],["type","password","autocomplete","new-password","placeholder","At least 8 characters","required","",3,"input","value"],["type","password","autocomplete","new-password","placeholder","Repeat your password","required","",3,"input","value"],[1,"field-error"],["role","alert",1,"auth-error"],["type","submit",1,"auth-button",3,"disabled"],[1,"auth-link-row"],["routerLink","/login"]],template:function(i,e){i&1&&(t(0,"section",0)(1,"div",1)(2,"p",2),n(3,"Noctis"),r(),t(4,"h1"),n(5,"Create account"),r(),t(6,"p",3),n(7,"Set up your account to start tracking sleep quality."),r(),t(8,"form",4),c("submit",function(d){return e.onSubmit(d)}),t(9,"label",5)(10,"span"),n(11,"Email"),r(),t(12,"input",6),c("input",function(d){return e.onEmailInput(d)}),r()(),t(13,"label",5)(14,"span"),n(15,"Password"),r(),t(16,"input",7),c("input",function(d){return e.onPasswordInput(d)}),r()(),t(17,"label",5)(18,"span"),n(19,"Confirm password"),r(),t(20,"input",8),c("input",function(d){return e.onConfirmPasswordInput(d)}),r()(),u(21,T,2,0,"p",9),u(22,A,2,0,"p",9),u(23,L,2,0,"p",9),u(24,q,2,1,"p",10),t(25,"button",11),n(26),r()(),t(27,"p",12),n(28," Already have an account? "),t(29,"a",13),n(30,"Log in"),r()()()()),i&2&&(s(12),p("value",e.email()),f("aria-invalid",e.showEmailError()),s(4),p("value",e.password()),f("aria-invalid",e.showPasswordError()),s(4),p("value",e.confirmPassword()),f("aria-invalid",e.showConfirmPasswordError()),s(),m(e.showEmailError()?21:-1),s(),m(e.showPasswordError()?22:-1),s(),m(e.showConfirmPasswordError()?23:-1),s(),m(e.errorMessage()?24:-1),s(),p("disabled",e.isSubmitting()),s(),S(" ",e.submitLabel()," "))},dependencies:[y],styles:[".auth-page[_ngcontent-%COMP%]{min-height:calc(100vh - 6rem);display:grid;place-items:center}.auth-card[_ngcontent-%COMP%]{width:min(100%,420px);background:var(--color-surface);border-radius:var(--radius-lg);box-shadow:var(--shadow-soft);padding:var(--space-4)}h1[_ngcontent-%COMP%]{margin-bottom:var(--space-1)}.auth-form[_ngcontent-%COMP%]{margin-top:var(--space-3);display:grid;gap:var(--space-2)}.form-field[_ngcontent-%COMP%]{display:grid;gap:.4rem;color:var(--color-muted)}.form-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:1px solid rgba(15,27,45,.12);border-radius:var(--radius-md);padding:.75rem .85rem;font-family:var(--font-body);font-size:1rem}.form-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:2px solid rgba(15,107,109,.35);border-color:#0f6b6d99}.field-error[_ngcontent-%COMP%], .auth-error[_ngcontent-%COMP%]{margin:0;padding:.6rem .8rem;border-radius:var(--radius-md);background:#c4282814;color:#7d1f1f;font-size:.9rem}.auth-button[_ngcontent-%COMP%]{border:none;border-radius:999px;padding:.8rem 1rem;background:var(--color-accent);color:#fff;font-family:var(--font-body);font-size:.95rem;cursor:pointer}.auth-button[disabled][_ngcontent-%COMP%]{opacity:.6;cursor:not-allowed}.auth-link-row[_ngcontent-%COMP%]{margin-top:var(--space-3);font-size:.95rem}.auth-link-row[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--color-accent);text-decoration:underline}"]})}return a})();export{H as SignupPageComponent};
