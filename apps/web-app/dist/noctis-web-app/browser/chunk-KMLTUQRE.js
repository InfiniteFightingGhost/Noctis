import{a as O,b as L,c as D,e as N}from"./chunk-TZ3X7ZKC.js";import{a as x}from"./chunk-JMSUOWMQ.js";import{c as E,e as S,f as y}from"./chunk-R6BJDFJL.js";import{Ea as b,Fa as u,Ga as p,Ka as c,La as e,Ma as r,Ta as g,Va as M,ba as d,c as _,db as n,eb as P,fb as C,lb as h,oa as s,ua as m,ya as w}from"./chunk-VHPO65OP.js";function I(a,f){a&1&&(e(0,"p",8),n(1,"Enter a valid email address."),r())}function k(a,f){a&1&&(e(0,"p",8),n(1,"Password must be at least 8 characters."),r())}function T(a,f){if(a&1&&(e(0,"p",9),n(1),r()),a&2){let o=M();s(),P(o.errorMessage())}}var U=(()=>{class a{auth;router;route;email=d("");password=d("");hasSubmitted=d(!1);isSubmitting=d(!1);errorMessage=d(null);showEmailError=h(()=>this.hasSubmitted()&&!L(this.email()));showPasswordError=h(()=>this.hasSubmitted()&&!D(this.password()));submitLabel=h(()=>this.isSubmitting()?"Signing in...":"Sign in");constructor(o,t,i){this.auth=o,this.router=t,this.route=i}onEmailInput(o){let t=o.target;this.email.set(t.value),this.errorMessage.set(null)}onPasswordInput(o){let t=o.target;this.password.set(t.value),this.errorMessage.set(null)}onSubmit(o){return _(this,null,function*(){if(o.preventDefault(),this.hasSubmitted.set(!0),this.errorMessage.set(null),!(this.showEmailError()||this.showPasswordError())){this.isSubmitting.set(!0);try{yield this.auth.login(this.email().trim(),this.password());let t=N(this.route.snapshot.queryParamMap.get("redirect"));yield this.router.navigateByUrl(t)}catch(t){this.errorMessage.set(O(t))}finally{this.isSubmitting.set(!1)}}})}static \u0275fac=function(t){return new(t||a)(m(x),m(S),m(E))};static \u0275cmp=w({type:a,selectors:[["app-login-page"]],decls:26,vars:9,consts:[[1,"auth-page"],[1,"auth-card"],[1,"eyebrow"],[1,"lede"],[1,"auth-form",3,"submit"],[1,"form-field"],["type","email","autocomplete","email","placeholder","you@example.com","required","",3,"input","value"],["type","password","autocomplete","current-password","placeholder","At least 8 characters","required","",3,"input","value"],[1,"field-error"],["role","alert",1,"auth-error"],["type","submit",1,"auth-button",3,"disabled"],[1,"auth-link-row"],["routerLink","/signup"]],template:function(t,i){t&1&&(e(0,"section",0)(1,"div",1)(2,"p",2),n(3,"Noctis"),r(),e(4,"h1"),n(5,"Log in"),r(),e(6,"p",3),n(7,"Sign in to continue to your sleep dashboard."),r(),e(8,"form",4),g("submit",function(l){return i.onSubmit(l)}),e(9,"label",5)(10,"span"),n(11,"Email"),r(),e(12,"input",6),g("input",function(l){return i.onEmailInput(l)}),r()(),e(13,"label",5)(14,"span"),n(15,"Password"),r(),e(16,"input",7),g("input",function(l){return i.onPasswordInput(l)}),r()(),u(17,I,2,0,"p",8),u(18,k,2,0,"p",8),u(19,T,2,1,"p",9),e(20,"button",10),n(21),r()(),e(22,"p",11),n(23," New here? "),e(24,"a",12),n(25,"Create an account"),r()()()()),t&2&&(s(12),c("value",i.email()),b("aria-invalid",i.showEmailError()),s(4),c("value",i.password()),b("aria-invalid",i.showPasswordError()),s(),p(i.showEmailError()?17:-1),s(),p(i.showPasswordError()?18:-1),s(),p(i.errorMessage()?19:-1),s(),c("disabled",i.isSubmitting()),s(),C(" ",i.submitLabel()," "))},dependencies:[y],styles:[".auth-page[_ngcontent-%COMP%]{min-height:calc(100vh - 6rem);display:grid;place-items:center}.auth-card[_ngcontent-%COMP%]{width:min(100%,420px);background:var(--color-surface);border-radius:var(--radius-lg);box-shadow:var(--shadow-soft);padding:var(--space-4)}h1[_ngcontent-%COMP%]{margin-bottom:var(--space-1)}.auth-form[_ngcontent-%COMP%]{margin-top:var(--space-3);display:grid;gap:var(--space-2)}.form-field[_ngcontent-%COMP%]{display:grid;gap:.4rem;color:var(--color-muted)}.form-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:1px solid rgba(15,27,45,.12);border-radius:var(--radius-md);padding:.75rem .85rem;font-family:var(--font-body);font-size:1rem}.form-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:2px solid rgba(15,107,109,.35);border-color:#0f6b6d99}.field-error[_ngcontent-%COMP%], .auth-error[_ngcontent-%COMP%]{margin:0;padding:.6rem .8rem;border-radius:var(--radius-md);background:#c4282814;color:#7d1f1f;font-size:.9rem}.auth-button[_ngcontent-%COMP%]{border:none;border-radius:999px;padding:.8rem 1rem;background:var(--color-accent);color:#fff;font-family:var(--font-body);font-size:.95rem;cursor:pointer}.auth-button[disabled][_ngcontent-%COMP%]{opacity:.6;cursor:not-allowed}.auth-link-row[_ngcontent-%COMP%]{margin-top:var(--space-3);font-size:.95rem}.auth-link-row[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--color-accent);text-decoration:underline}"]})}return a})();export{U as LoginPageComponent};
