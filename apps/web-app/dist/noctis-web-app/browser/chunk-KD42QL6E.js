import{a as k,b as H}from"./chunk-OLQLXGD7.js";import{f as M}from"./chunk-R6BJDFJL.js";import{Cb as S,Fa as b,Ga as C,I as c,La as i,M as a,Ma as n,R as _,Ra as y,S as x,Ta as E,Va as p,ba as l,c as f,db as o,eb as m,lb as u,o as h,oa as s,ya as w}from"./chunk-VHPO65OP.js";var O=(()=>{class e{api=a(S);getOverview(){return this.api.get("/v1/home/overview")}static \u0275fac=function(r){return new(r||e)};static \u0275prov=c({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var P=(()=>{class e{api=a(O);overview=l(null);status=l("loading");errorMessage=l(null);isFetching=l(!1);loadOverview(){return f(this,null,function*(){this.status.set("loading"),this.errorMessage.set(null),this.isFetching.set(!0);try{let t=yield h(this.api.getOverview());this.overview.set(t),this.status.set("success")}catch(t){let r=k(t);this.errorMessage.set(r.message),this.status.set("error")}finally{this.isFetching.set(!1)}})}static \u0275fac=function(r){return new(r||e)};static \u0275prov=c({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function j(e,v){e&1&&(i(0,"p",2),o(1,"Loading your home overview..."),n())}function A(e,v){if(e&1){let t=y();i(0,"div",5)(1,"h3"),o(2,"Home data unavailable"),n(),i(3,"p"),o(4),n(),i(5,"ui-button",6),E("click",function(){_(t);let d=p();return x(d.reload())}),o(6,"Retry"),n()()}if(e&2){let t=p();s(4),m(t.store.errorMessage()??"Unable to load home overview.")}}function F(e,v){if(e&1&&(i(0,"article",7)(1,"p",8),o(2),n(),i(3,"p",9),o(4),n()(),i(5,"nav",10)(6,"a",11)(7,"strong"),o(8,"Review last night"),n(),i(9,"span",9),o(10,"Dashboard"),n()(),i(11,"a",12)(12,"strong"),o(13,"Adjust smart alarm"),n(),i(14,"span",9),o(15,"Alarm"),n()(),i(16,"a",13)(17,"strong"),o(18,"Update bedtime routine"),n(),i(19,"span",9),o(20,"Routine editor"),n()()()),e&2){let t=p();s(2),m(t.lede()),s(2),m(t.updatedAtLabel())}}var D=(()=>{class e{store=a(P);headline=u(()=>this.store.overview()?.headline??"Home");lede=u(()=>this.store.overview()?.lede??"Your sleep overview appears here once nightly sync finishes.");updatedAtLabel=u(()=>{let t=this.store.overview()?.updated_at;return t?`Updated ${t}`:"Updated time unavailable"});ngOnInit(){this.store.loadOverview()}reload(){this.store.loadOverview()}static \u0275fac=function(r){return new(r||e)};static \u0275cmp=w({type:e,selectors:[["app-home-page"]],decls:11,vars:2,consts:[[1,"screen","screen--dark","sleep-summary-theme"],[1,"screen__header"],[1,"screen__sub"],[1,"screen__title"],["aria-live","polite",1,"screen__section"],[1,"state-panel"],[3,"click"],[1,"chart-card"],[1,"chart-card__summary"],[1,"list-row__meta"],["aria-label","Primary workflows",1,"quick-actions"],["routerLink","/dashboard",1,"list-row"],["routerLink","/alarm",1,"list-row"],["routerLink","/routine/edit",1,"list-row"]],template:function(r,d){if(r&1&&(i(0,"section",0)(1,"header",1)(2,"div")(3,"p",2),o(4,"Home"),n(),i(5,"h1",3),o(6),n()()(),i(7,"section",4),b(8,j,2,0,"p",2)(9,A,7,1,"div",5)(10,F,21,2),n()()),r&2){let g;s(6),m(d.headline()),s(2),C((g=d.store.status())==="loading"?8:g==="error"?9:10)}},dependencies:[M,H],styles:[".quick-actions[_ngcontent-%COMP%]{display:grid;gap:.65rem}.quick-actions[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:inherit}"]})}return e})();var ee=[{path:"",component:D}];export{ee as HOME_ROUTES};
