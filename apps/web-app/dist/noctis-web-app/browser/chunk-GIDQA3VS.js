import{Cb as I,Fa as b,Ga as x,I as E,M as c,Oa as t,Pa as n,Sa as p,Ua as g,Va as _,ba as m,bb as y,c as f,db as r,eb as u,fb as h,lb as v,o as C,oa as s,xb as M,ya as S,yb as P}from"./chunk-VHPO65OP.js";var k=(()=>{class a{api=c(I);createUser(e,i){let o=new M({Authorization:`Bearer ${i}`});return this.api.post("/v1/users",{name:e.name,external_id:e.externalId??null},{headers:o})}static \u0275fac=function(i){return new(i||a)};static \u0275prov=E({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})();var U=(()=>{class a{api=c(k);name=m("");externalId=m("");adminToken=m("");status=m("idle");errorMessage=m("Something went wrong. Please try again.");createdUser=m(null);canSubmit=v(()=>this.status()!=="loading"&&this.name().trim().length>0&&this.adminToken().trim().length>0);submitLabel=v(()=>this.status()==="loading"?"Creating...":"Create user");statusLabel=v(()=>this.status()==="loading"?"Creating":this.status()==="success"?"Ready":this.status()==="error"?"Action needed":"Idle");updateName(e){this.name.set(e),this.resetStatus()}updateExternalId(e){this.externalId.set(e),this.resetStatus()}updateAdminToken(e){this.adminToken.set(e),this.resetStatus()}createUser(){return f(this,null,function*(){if(this.canSubmit()){this.status.set("loading"),this.errorMessage.set("Something went wrong. Please try again."),this.createdUser.set(null);try{let e=yield C(this.api.createUser({name:this.name().trim(),externalId:this.externalId().trim()||null},this.adminToken().trim()));this.createdUser.set(e),this.status.set("success")}catch(e){this.status.set("error"),this.errorMessage.set(this.extractErrorMessage(e))}}})}extractErrorMessage(e){if(e instanceof P){if(e.status===401)return"Unauthorized. Provide a valid admin token.";if(e.status===403)return"Forbidden. Admin role required.";if(typeof e.error=="string")return e.error;if(e.error?.detail)return e.error.detail;if(e.error?.error?.message)return e.error.error.message}return"Unable to create user. Please try again."}resetStatus(){this.status()!=="loading"&&this.status()!=="idle"&&(this.status.set("idle"),this.errorMessage.set("Something went wrong. Please try again."),this.createdUser.set(null))}static \u0275fac=function(i){return new(i||a)};static \u0275prov=E({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})();function T(a,O){if(a&1&&(t(0,"div",15),r(1),n()),a&2){let e=_();s(),u(e.store.errorMessage())}}function N(a,O){if(a&1&&(t(0,"div",16)(1,"h3"),r(2,"User created"),n(),t(3,"div",17)(4,"div")(5,"span",18),r(6,"Name"),n(),t(7,"strong"),r(8),n()(),t(9,"div")(10,"span",18),r(11,"External ID"),n(),t(12,"strong"),r(13),n()(),t(14,"div")(15,"span",18),r(16,"User ID"),n(),t(17,"strong"),r(18),n()(),t(19,"div")(20,"span",18),r(21,"Created"),n(),t(22,"strong"),r(23),n()()()()),a&2){let e,i,o,l,d=_();s(8),u((e=d.store.createdUser())==null?null:e.name),s(5),u(((i=d.store.createdUser())==null?null:i.external_id)||"\u2014"),s(5),u((o=d.store.createdUser())==null?null:o.id),s(5),u((l=d.store.createdUser())==null?null:l.created_at)}}var w=(()=>{class a{store=c(U);onNameInput(e){let i=e.target;this.store.updateName(i.value)}onExternalIdInput(e){let i=e.target;this.store.updateExternalId(i.value)}onAdminTokenInput(e){let i=e.target;this.store.updateAdminToken(i.value)}onSubmit(e){return f(this,null,function*(){e.preventDefault(),yield this.store.createUser()})}static \u0275fac=function(i){return new(i||a)};static \u0275cmp=S({type:a,selectors:[["app-account-page"]],decls:39,vars:10,consts:[[1,"page"],[1,"page__intro"],[1,"eyebrow"],[1,"lede"],[1,"page__section"],[1,"section-head"],[1,"status-pill"],[1,"account-form",3,"submit"],[1,"form-field"],["type","text","placeholder","e.g., Alex Morgan","required","",3,"input","value"],["type","text","placeholder","crm-12452",3,"input","value"],["type","password","placeholder","Bearer token","autocomplete","off","required","",3,"input","value"],[1,"form-actions"],["type","submit",1,"primary-button",3,"disabled"],[1,"hint"],[1,"notice","notice--error"],[1,"result-card"],[1,"result-grid"],[1,"result-label"]],template:function(i,o){i&1&&(t(0,"section",0)(1,"div",1)(2,"p",2),r(3,"Account"),n(),t(4,"h1"),r(5,"Your account"),n(),t(6,"p",3),r(7,"Manage profile settings and preferences here."),n()(),t(8,"div",4)(9,"div",5)(10,"div")(11,"p",2),r(12,"Admin tools"),n(),t(13,"h2"),r(14,"Create a user"),n(),t(15,"p",3),r(16," Use an admin token to create a user in the active tenant. "),n()(),t(17,"span",6),r(18),n()(),t(19,"form",7),g("submit",function(d){return o.onSubmit(d)}),t(20,"label",8)(21,"span"),r(22,"Name"),n(),t(23,"input",9),g("input",function(d){return o.onNameInput(d)}),n()(),t(24,"label",8)(25,"span"),r(26,"External ID (optional)"),n(),t(27,"input",10),g("input",function(d){return o.onExternalIdInput(d)}),n()(),t(28,"label",8)(29,"span"),r(30,"Admin token"),n(),t(31,"input",11),g("input",function(d){return o.onAdminTokenInput(d)}),n()(),t(32,"div",12)(33,"button",13),r(34),n(),t(35,"p",14),r(36,"Requires admin role in the API."),n()()(),b(37,T,2,1,"div",15),b(38,N,24,4,"div",16),n()()),i&2&&(s(17),y("is-live",o.store.status()==="success"),s(),h(" ",o.store.statusLabel()," "),s(5),p("value",o.store.name()),s(4),p("value",o.store.externalId()),s(4),p("value",o.store.adminToken()),s(2),p("disabled",!o.store.canSubmit()),s(),h(" ",o.store.submitLabel()," "),s(3),x(o.store.status()==="error"?37:-1),s(),x(o.store.createdUser()?38:-1))},styles:[".page__section[_ngcontent-%COMP%]{margin-top:var(--space-4);display:grid;gap:var(--space-3)}.section-head[_ngcontent-%COMP%]{display:flex;gap:var(--space-3);justify-content:space-between;align-items:center;flex-wrap:wrap}.status-pill[_ngcontent-%COMP%]{padding:.35rem .8rem;border-radius:999px;background:var(--color-accent-soft);color:var(--color-accent);font-size:.75rem;text-transform:uppercase;letter-spacing:.08em}.status-pill.is-live[_ngcontent-%COMP%]{background:#0f6b6d1f;color:#0f6b6d}.account-form[_ngcontent-%COMP%]{display:grid;gap:var(--space-2)}.form-field[_ngcontent-%COMP%]{display:grid;gap:.4rem;font-size:.9rem;color:var(--color-muted)}.form-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:1px solid rgba(15,27,45,.12);border-radius:var(--radius-md);padding:.75rem .85rem;font-size:1rem;font-family:var(--font-body);color:var(--color-ink);background:#fff}.form-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:2px solid rgba(15,107,109,.35);border-color:#0f6b6d99}.form-actions[_ngcontent-%COMP%]{display:flex;gap:var(--space-2);align-items:center;flex-wrap:wrap}.primary-button[_ngcontent-%COMP%]{border:none;border-radius:999px;padding:.75rem 1.6rem;background:var(--color-accent);color:#fff;font-size:.95rem;cursor:pointer}.primary-button[disabled][_ngcontent-%COMP%]{opacity:.5;cursor:not-allowed}.hint[_ngcontent-%COMP%]{margin:0;font-size:.85rem}.notice[_ngcontent-%COMP%]{padding:.75rem 1rem;border-radius:var(--radius-md);background:#c4282814;color:#7d1f1f}.result-card[_ngcontent-%COMP%]{padding:var(--space-3);border-radius:var(--radius-lg);background:var(--color-accent-soft)}.result-grid[_ngcontent-%COMP%]{display:grid;gap:var(--space-2);grid-template-columns:repeat(auto-fit,minmax(200px,1fr))}.result-label[_ngcontent-%COMP%]{display:block;font-size:.75rem;text-transform:uppercase;letter-spacing:.08em;color:var(--color-muted);margin-bottom:.25rem}"]})}return a})();var Z=[{path:"",component:w}];export{Z as ACCOUNT_ROUTES};
